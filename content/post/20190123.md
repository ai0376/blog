---
title: "Golang id和类型绑定并获取新对象"
date: 2019-01-23T17:43:07+08:00
draft: false
---

```
type Animal interface {
	GetName() string
}

type Dog struct {
}

type Cat struct {
}

func (u *Dog) GetName() string {
	return "I am Dog"
}

func (u *Cat) GetName() string {
	return "I am Cat"
}

var handler = make(map[int]interface{})

func registerHandler(id int, b interface{}) {
	handler[id] = b
}

func createHandler(id int) interface{} {
	if v, ok := handler[id]; ok {
		u := reflect.New(reflect.TypeOf(v)).Interface()
		return u
		fmt.Println(u)
	}
	return nil
}

func main() {

	registerHandler(1, Dog{})
	registerHandler(2, Cat{})

	u := createHandler(1)
	u.(Animal).SetName("hello")
	fmt.Println(u.(Animal).GetName())
	g := createHandler(2)
	fmt.Println(g.(Animal).GetName())

	fmt.Println(&g)
	g1 := createHandler(2)
	fmt.Println(&g1)
}
```

